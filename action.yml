name: 'Install Procursus'
description: 'Install the Procursus toolchain'
author: 'beerpsi'
runs:
  using: "composite"
  steps:
    - name: Downloading bootstrap
      shell: bash
      run: curl -L https://apt.procurs.us/bootstrap_darwin-amd64.tar.zst -o bootstrap.tar.zst
    - name: Extracting and installing bootstrap
      shell: bash
      run: |
        zstd -d bootstrap.tar.zst
        sudo gtar -xpkf bootstrap.tar -C /
    - name: Adding Procusus to PATH
      shell: bash
      run: |
        echo "/opt/procursus/bin" >> $GITHUB_PATH
        echo "/opt/procursus/sbin" >> $GITHUB_PATH
        echo "/opt/procursus/games" >> $GITHUB_PATH
        
        echo "CPATH='$CPATH:/opt/procursus/include'" >> $GITHUB_ENV
        echo "LIBRARY_PATH='$LIBRARY_PATH:/opt/procursus/lib'" >> $GITHUB_ENV
    - name: Doing full upgrade
      shell: bash
      run: |
        sudo apt-get -y update
        sudo apt-get -y full-upgrade
        

branding:
  icon: download-cloud
  color: purple
